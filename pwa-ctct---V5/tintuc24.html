<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PTKV3 ‚Ä¢ Tin t·ª©c</title>
<link rel="stylesheet" href="css/nav.css?v=20251006">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f6f8fb;--card:#fff;--text:#0f172a;--muted:#6b7280;--border:#e5e7eb;
  --accent:#b91c1c;--accent-2:#FFD966;--accent-dark:#991b1b;
  --hot-font-size:16px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif
}
a{color:inherit;text-decoration:none}
a:hover{color:#dc2626}

/* ===== Header / Footer ===== */
.header{
  position:sticky;top:0;z-index:50;
  font-weight:600;
  background:linear-gradient(90deg,#7f1d1d,#b91c1c 45%,#dc2626);
  color:#fff
}
.nav{
  max-width:1200px;margin:auto;
  display:flex;gap:18px;align-items:center;
  padding:12px 16px;
}
.nav .brand{font-weight:800}
.nav a{color:#fff;padding:6px 10px;border-radius:8px;}
.nav a[aria-current="page"]{background:rgba(0,0,0,.18);}
.nav a:hover{color:var(--accent-2);transform:scale(1.06);}
.footer{margin-top:40px;background:#111827;color:#cbd5e1}
.footer .wrap{max-width:1200px;margin:auto;padding:20px 16px;font-size:14px}

/* ===== Common ===== */
.container{max-width:1200px;margin:22px auto;padding:0 16px}
.section{
  background:#fff;border:1px solid var(--border);
  border-radius:14px;padding:16px;margin-bottom:22px
}
.section h2{
  margin:4px 0 16px;font-size:20px;font-weight:800;
  display:flex;gap:10px;align-items:center
}
.badge{
  border:1px solid #d1d5db;border-radius:999px;
  font-size:12px;padding:2px 8px;background:#fff;color:#374151
}
.muted{color:var(--muted)}
.hide{display:none}
.skeleton{
  background:linear-gradient(90deg,#eee,#f6f6f6 30%,#eee);
  background-size:200% 100%;
  animation:sh 1.2s linear infinite
}
@keyframes sh{to{background-position:-200% 0}}

/* ===== TODAY ===== */
.today-top{
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap:14px
}
.today-top .img{
  height:360px;border-radius:12px;overflow:hidden;
  border:1px solid var(--border);background:#fff
}
.today-top .img img{width:100%;height:100%;object-fit:cover;display:block}
.today-top .txt{
  border:1px solid var(--border);border-radius:12px;
  padding:16px;background:#fff;
  display:flex;flex-direction:column;gap:8px
}
.today-top .title{font-size:26px;line-height:1.25;font-weight:800;}
.today-top .desc{color:#374151;line-height:1.6}

/* strip desktop: cu·ªôn ngang */
.strip{
  display:flex;gap:12px;overflow-x:auto;
  padding:10px 2px;scroll-snap-type:x mandatory
}
.strip::-webkit-scrollbar{height:8px}
.strip::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:8px}
.card-sm{
  min-width:260px;max-width:260px;
  scroll-snap-align:start;
  border:1px solid var(--border);border-radius:12px;
  background:#fff;overflow:hidden
}
.card-sm img{width:100%;height:140px;object-fit:cover;display:block}
.card-sm .pad{padding:10px}
.card-sm h4{margin:0 0 6px;font-size:15px;line-height:1.35}
.card-sm .card-desc{
  margin:0;font-size:13px;line-height:1.5;color:#4b5563;
}

/* ===== POLITICS ===== */
.grid-2{display:grid;grid-template-columns:1.7fr 1fr;gap:18px}
.p-feature{
  border:1px solid var(--border);border-radius:12px;
  overflow:hidden;background:#fff
}
.p-feature .hero{width:100%;height:420px;object-fit:cover;display:block}
.p-feature .pad{padding:14px;border-top:1px solid var(--border)}
.p-feature .title{font-size:26px;font-weight:800;line-height:1.22;margin:6px 0;}
.p-feature .desc{color:#374151;line-height:1.6}
.sidebar{
  max-height:700px;
  border:1px solid var(--border);border-radius:12px;
  background:#fff;overflow:auto
}
.sidebar .head{
  position:sticky;top:0;padding:10px 14px;
  border-bottom:1px solid var(--border);
  font-weight:800;color:var(--accent);background:#fff
}
.hot{list-style:none;margin:0;padding:0;font-size:18px;}
.hot li{
  padding:12px 14px;border-bottom:1px dashed var(--border)
}
.hot li:last-child{border-bottom:none}

/* ===== POLICY ===== */
.policy-grid{
  display:grid;gap:18px;
  grid-template-columns:1.15fr 1.25fr 1.15fr;
  grid-template-areas:
    "pimg pdetail phot"
    "pmid pmid   phot";
}
.card{
  background:#fff;border:1px solid var(--border);
  border-radius:16px;box-shadow:0 4px 20px rgba(17,24,39,.04)
}
.p-img{grid-area:pimg}
.p-hero{position:relative;overflow:hidden}
.p-hero img{width:100%;height:280px;object-fit:cover;display:block}
.p-hero .ribbon{
  position:absolute;left:12px;top:12px;
  background:rgba(255,255,255,.92);color:#111827;
  font-weight:700;font-size:12px;padding:6px 10px;
  border-radius:999px;border:1px solid #e5e7eb
}
.p-detail{grid-area:pdetail;padding:14px 16px}
.p-title{
  font-size:24px;font-weight:800;line-height:1.28;margin:0;
  text-align:left;text-wrap:balance
}
.p-desc{color:#374151;font-size:15px;line-height:1.65;margin-top:8px;}
.p-meta{color:#6b7280;font-size:12px;margin-top:10px;}
.p-hot{grid-area:phot}
.hot-card{position:sticky;top:10px;height:100%;display:flex;flex-direction:column}
.hot-head{
  padding:12px 16px;font-weight:800;color:#b91c1c;
  border-bottom:1px solid var(--border);
  border-radius:16px 16px 0 0
}
.hot-list{
  display:flex;flex-direction:column;
  gap:12px;padding:12px 10px;height:100%;justify-content:space-between
}
.hot-item{display:grid;grid-template-columns:28px 1fr;gap:10px;align-items:flex-start}
.hot-num{
  display:inline-grid;place-items:center;
  width:28px;height:28px;border-radius:8px;
  background:#fef2f2;color:#b91c1c;font-weight:800;
  border:1px solid #fde1e1;font-size:20px;
}
.hot-title{
  font-weight:500;line-height:1.55;font-size:var(--hot-font-size);
}

/* tiles d∆∞·ªõi hero */
.p-mid{grid-area:pmid;display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.tile{overflow:hidden}
.tile img{
  width:100%;height:150px;object-fit:cover;display:block;
  transition:transform .35s
}
.tile:hover img{transform:scale(1.03)}
.tile .pad{padding:10px 12px}

/* list 2 columns */
.policy-list{
  display:grid;grid-template-columns:1fr 1fr;
  gap:16px;margin-top:16px
}
.pl-item{
  display:grid;grid-template-columns:180px 1fr;
  gap:14px;padding:12px
}
.pl-item img{
  width:180px;height:120px;object-fit:cover;border-radius:10px
}
.pl-item h4{margin:0 0 6px;font-size:16px;line-height:1.38;}
.pl-item .desc{color:#374151;line-height:1.6;}

/* back to top */
#toTop{
  position:fixed;right:20px;bottom:56px;z-index:120;
  border:none;width:34px;height:34px;border-radius:3px;
  font-size:24px;display:flex;align-items:center;justify-content:center;
  background:#c00404;color:#FFD700;
  box-shadow:0 8px 20px rgba(185,28,28,.25);cursor:pointer
}

/* D√πng cho ƒëo·∫°n m√¥ t·∫£ */
.justify{text-align:justify;text-justify:inter-word;hyphens:auto;letter-spacing:normal;word-spacing:normal;line-height:1.6;text-wrap:pretty;}
.short{text-align:left;}
.tile .pad,.pl-item .desc,.p-desc{max-width:62ch}

/* clamp */
.clamp-1,.clamp-2,.clamp-3{
  display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;
}
.clamp-1{line-clamp:1;-webkit-line-clamp:1;}
.clamp-2{line-clamp:2;-webkit-line-clamp:2;}
.clamp-3{line-clamp:3;-webkit-line-clamp:3;}
.tile h4,.tile h4 a{
  display:-webkit-box;-webkit-box-orient:vertical;
  line-clamp:2;-webkit-line-clamp:2;overflow:hidden;
  text-align:left;text-wrap:balance
}
.pl-item h4,.pl-item h4 a{
  display:-webkit-box;-webkit-box-orient:vertical;
  line-clamp:2;-webkit-line-clamp:2;overflow:hidden;
}
.pl-item .desc{
  display:-webkit-box;-webkit-box-orient:vertical;
  line-clamp:3;-webkit-line-clamp:3;overflow:hidden;
}
.tile .pad{min-height:86px}
.pl-item{min-height:146px}
.p-title a{display:block}
@media (min-width:1025px){.p-title{font-size:26px}}

/* Hot list b√™n ph·∫£i ‚Äì gi·ªõi h·∫°n 2 d√≤ng */
.hot-title{
  display:-webkit-box;-webkit-box-orient:vertical;
  line-clamp:2;-webkit-line-clamp:2;overflow:hidden
}

/* MOBILE NAV TOGGLE */
.m-toggle{
  display:none !important;
  background:transparent;border:0;color:#fff;
  font-size:28px;line-height:1;
}

/* ===== TRA C·ª®U VƒÇN B·∫¢N ==== */
.section-search{
  display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap;
}
.section-search input{
  flex:1;min-width:220px;padding:8px 10px;
  border-radius:8px;border:1px solid var(--border);font-size:14px;
}
.section-search select,
.section-search button{
  padding:8px 10px;border-radius:8px;
  border:1px solid var(--border);background:#fff;font-size:14px;
}
.section-search button{
  background:var(--accent);color:#fff;border-color:var(--accent-dark);
  cursor:pointer;white-space:nowrap;
}
.section-search button:hover{background:var(--accent-dark);}
#doc-results .muted{padding:6px 0;}

/* ==== TIN THEO TH·ªúI GIAN ==== */
.section-time{margin-bottom:22px;}
.time-head{display:flex;align-items:center;gap:10px;margin-bottom:8px;}
.time-head-icon{font-size:26px;}
.time-head-title{margin:0;font-size:20px;font-weight:800;}
.time-form{
  display:flex;flex-wrap:wrap;gap:8px;margin-bottom:8px;
}
.time-form select{
  flex:1;min-width:210px;padding:8px 12px;
  border-radius:999px;border:1px solid var(--border);
  font-size:14px;background:#fff;
}
.time-form button{
  padding:8px 18px;border-radius:999px;
  border:1px solid var(--accent);background:var(--accent);
  color:#fff;font-size:14px;cursor:pointer;white-space:nowrap;
}
.time-form button:hover{background:var(--accent-dark);}
.time-info{font-size:13px;color:var(--muted);margin-bottom:6px;}

/* L∆∞·ªõi card th·ªùi gian */
.time-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:14px;
}
.time-card{
  display:grid;
  grid-template-columns:140px 1fr;
  gap:12px;
  padding:10px;
  border-radius:16px;
  background:#fff;
  border:1px solid #e5e7eb;
}
.time-card img{
  width:140px;height:96px;object-fit:cover;border-radius:10px;
}
.time-card h3{
  margin:0 0 4px;
  font-size:16px;line-height:1.4;
}
.time-card p{
  margin:0;
  font-size:14px;line-height:1.5;
  color:#4b5563;
}
.time-card .meta{
  margin-top:6px;font-size:12px;color:var(--muted);
}

/* N√∫t xem th√™m TIN TRONG NG√ÄY */
.today-actions{
  display:none;
  margin-top:8px;
  text-align:center;
}

/* ===== MOBILE ===== */
@media (max-width:1024px){
  .nav a:not(.brand),.nav .has-dropdown{display:none !important}
  .m-toggle{display:block !important;margin-left:auto}

  .m-drawer{
    position:fixed;inset:0 auto 0 0;width:86vw;max-width:420px;
    transform:translateX(-100%);
    background:linear-gradient(180deg,#7f1d1d,#b91c1c 55%,#9d1414);
    color:#fff;z-index:120;
    transition:transform .25s ease;
    box-shadow:4px 0 30px rgba(0,0,0,.25);
  }
  .m-head{display:flex;align-items:center;gap:10px;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.12)}
  .m-home{font-size:22px;text-decoration:none}
  .m-brand{font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .m-close{margin-left:auto;background:0 0;border:0;color:#fff;font-size:28px;cursor:pointer}
  .m-menu{padding:8px 8px 18px}
  .m-item{
    display:block;color:#fff;padding:14px 10px;font-weight:600;
    border-bottom:1px solid rgba(255,255,255,.08)
  }
  .m-drop .caret{float:right}
  .m-sub{display:flex;flex-direction:column;gap:6px;padding:10px 10px 12px}
  .m-sub a{
    padding:10px 10px 8px 18px;
    border-bottom:1px dashed rgba(255,255,255,.12)
  }
  .m-sub[hidden]{display:none !important;}
  .m-drop[aria-expanded="true"] .caret{transform:rotate(180deg);}
  .m-backdrop{
    position:fixed;inset:0;background:rgba(0,0,0,.35);
    backdrop-filter:blur(2px);
    z-index:110;opacity:0;transition:opacity .25s;pointer-events:none;
  }
  body.menu-open .m-drawer{transform:translateX(0)}
  body.menu-open .m-backdrop{opacity:1;pointer-events:auto}
  body.no-scroll{overflow:hidden}
  .m-menu .m-item[aria-current="page"]{
    background:rgba(255,255,255,.16);
    border-left:3px solid #FFD966;
    font-weight:800;
  }

  .p-feature .hero{
    width:100%;height:56vw;max-height:260px;min-height:180px;object-fit:cover;
  }
}

@media (max-width:768px){
  .container{padding:0 10px;}
  .section{
    background:transparent;border:none;box-shadow:none;
    padding:0 0 12px;margin-bottom:14px;
  }
  .section h2{font-size:17px;margin:4px 0 8px;}

  /* Tin trong ng√†y ‚Äì 1 tin l·ªõn + list d·ªçc */
  .today-top{
    grid-template-columns:1fr;
    gap:8px;padding:10px 0;
    border-bottom:1px solid #e5e7eb;
  }
  .today-top .img{
    height:220px;border-radius:10px;border:none;
  }
  .today-top .txt{border:none;padding:0;background:transparent;}
  .today-top .title{font-size:18px;}
  .today-top .desc{font-size:14px;}

  .strip{
    display:flex;
    flex-direction:column;
    gap:0;
    overflow-x:visible;
    overflow-y:visible;
    max-height:none;
    padding:0;
    margin:4px 0 0;
  }
  .card-sm{
    min-width:100%;max-width:100%;
    border:none;border-bottom:1px solid #e5e7eb;
    border-radius:0;
    display:grid;grid-template-columns:110px 1fr;
    gap:8px;padding:8px 0;
    box-shadow:none;background:transparent;
  }
  .card-sm:last-child{border-bottom:none;}
  .card-sm img{height:78px;border-radius:6px;}
  .card-sm .pad{padding:0;}
  .card-sm h4{font-size:14px;margin:0;line-height:1.35;}
  .card-sm .card-desc{font-size:13px;}

  /* Tin ch√≠nh tr·ªã */
  .grid-2{display:block;}
  .p-feature{
    border:none;border-radius:0;background:transparent;box-shadow:none;margin-bottom:6px;
  }
  .p-feature .pad{padding:8px 0 6px;border:none;}
  .p-feature .title{font-size:18px;}
  .p-feature .desc{font-size:14px;}
  .sidebar{
    border:none;border-radius:0;background:transparent;
    max-height:360px;overflow:auto;margin-top:4px;
  }
  .sidebar .head{
    padding:6px 0;border-bottom:2px solid #b91c1c;font-size:14px;
  }
  .hot{font-size:14px;}
  .hot li{
    padding:6px 0;border-bottom:1px solid #e5e7eb;
  }
  .hot li:last-child{border-bottom:none;}

  /* Ch√≠nh s√°ch m·ªõi ‚Äì b·ªè 3 tile mid */
  .policy-grid{
    display:block;padding-top:4px;border-top:1px solid #e5e7eb;
  }
  .card{border:none;box-shadow:none;background:transparent;}
  .p-img{margin-bottom:8px;}
  .p-hero img{height:220px;border-radius:10px;}
  .p-detail{padding:0 0 4px;}
  .p-title{font-size:18px;}
  .p-desc{font-size:14px;margin-top:6px;}
  .p-meta{font-size:12px;margin-top:4px;}
  .p-hot{margin-top:8px;}
  .hot-card{border:none;box-shadow:none;background:transparent;}
  .hot-head{
    padding:6px 0;border-bottom:2px solid #b91c1c;
    border-radius:0;font-size:14px;
  }
  .hot-list{padding:4px 0 0;gap:4px;}
  .hot-item{grid-template-columns:22px 1fr;gap:6px;}
  .hot-num{width:22px;height:22px;font-size:13px;border-radius:4px;}
  .hot-title{font-size:14px;}

  .p-mid{display:none;}

  .policy-list{
    grid-template-columns:1fr;gap:0;margin-top:8px;
  }
  .pl-item{
    grid-template-columns:120px 1fr;
    gap:10px;padding:8px 0;
    border-bottom:1px solid #e5e7eb;
    border-radius:0;min-height:auto;
  }
  .pl-item:last-child{border-bottom:none;}
  .pl-item img{width:120px;height:80px;border-radius:6px;}
  .pl-item h4{font-size:14px;}
  .pl-item .desc{font-size:13px;}

  .actions{text-align:center;margin-top:6px;}
  .btn{
    padding:7px 16px;border-radius:999px;
    border:1px solid #e5e7eb;background:#fff;
    font-size:14px;cursor:pointer;
  }

  .today-actions{display:block;}

  /* Tin theo th·ªùi gian ‚Äì mobile: 1 c·ªôt, card 2 c·ªôt */
  .time-grid{grid-template-columns:1fr;}
  .time-card{
    grid-template-columns:100px 1fr;
    padding:8px;
  }
  .time-card img{
    width:100px;height:72px;
  }
  .time-card h3{font-size:14px;}
  .time-card p{font-size:13px;}

  .section-search{
    flex-direction:column;gap:6px;
  }
  .section-search input,
  .section-search select,
  .section-search button{
    width:100%;font-size:14px;
  }
}

/* actions desktop */
.actions{margin-top:8px;text-align:right;}
.btn{
  display:inline-flex;align-items:center;justify-content:center;
  padding:6px 14px;font-size:13px;
  border-radius:999px;border:1px solid #e5e7eb;
  background:#fff;color:#374151;cursor:pointer;
}
.btn:hover{background:#f3f4f6;}
</style>
</head>
<body>

<header class="header">
  <nav class="nav">
    <a class="brand" href="index.html">BAN CH·ªà HUY PTKV3</a>
    <a href="index.html">Trang ch·ªß</a>
    <a href="#" aria-current="page" style="background:rgba(31,28,28,0.18)">Tin t·ª©c</a>
    <a href="Hoctap.html">H·ªçc t·∫≠p</a>
    <a href="kiemtra.html">Ki·ªÉm tra</a>
    <a href="xephang.html">K·∫øt qu·∫£ ki·ªÉm tra</a>
    <div class="sp"></div>
    <button class="m-toggle" aria-label="M·ªü menu">‚ò∞</button>
  </nav>

  <!-- MOBILE DRAWER -->
  <aside id="mDrawer" class="m-drawer" aria-hidden="true" role="dialog" aria-label="Menu">
    <div class="m-head">
      <a class="m-home" href="index.html" aria-label="Trang ch·ªß" title="Trang ch·ªß">üè†</a>
      <span class="m-brand">B·ªò CHQS T·ªàNH B·∫ÆC NINH</span>
      <button class="m-close" aria-label="ƒê√≥ng menu">‚úï</button>
    </div>
    <nav class="m-menu" role="navigation">
      <a class="m-item" href="index.html">Trang ch·ªß</a>
      <a class="m-item" href="tintuc24.html" aria-current="page">Tin t·ª©c</a>
      <a class="m-item" href="Hoctap.html">H·ªçc t·∫≠p</a>
      <a class="m-item" href="kiemtra.html">Ki·ªÉm tra</a>
      <a class="m-item" href="xephang.html">K·∫øt qu·∫£ ki·ªÉm tra</a>
    </nav>
  </aside>
  <div class="m-backdrop" hidden></div>
</header>

<div class="container">

  <!-- 0) TIN THEO TH·ªúI GIAN -->
  <section class="section section-time" id="time-news">
    <div class="time-head">
      <span class="time-head-icon">üì∞</span>
      <div>
        <h2 class="time-head-title">TIN THEO TH·ªúI GIAN</h2>
      </div>
    </div>

    <form id="time-form" class="time-form">
      <select id="time-range">
        <option value="">-- Ch·ªçn kho·∫£ng th·ªùi gian --</option>
        <option value="today">H√¥m nay</option>
        <option value="7d">7 ng√†y qua</option>
        <option value="month">30 ng√†y qua</option>
        <option value="prevmonth">Th√°ng tr∆∞·ªõc</option>
        <option value="year">12 th√°ng qua</option>
      </select>
      <button type="submit">Xem tin</button>
    </form>

    <div id="time-info" class="time-info muted"></div>
    <div id="time-results" class="time-grid"></div>
  </section>

  <!-- 1) TIN TRONG NG√ÄY -->
  <section class="section" id="today">
    <h2>üî• TIN TRONG NG√ÄY <span class="badge">VnExpress</span></h2>
    <div class="today-top" id="today-top">
      <div class="img skeleton"><img alt=""></div>
      <div class="txt skeleton"></div>
    </div>
    <div id="today-strip" class="strip"></div>
    <div class="today-actions">
      <button id="today-more" class="btn">Xem th√™m</button>
    </div>
  </section>

  <!-- 2) TIN CH√çNH TR·ªä -->
  <section class="section" id="politics">
    <h2>üèõÔ∏è TIN CH√çNH TR·ªä <span class="badge">ƒêCSVN</span></h2>
    <div class="grid-2">
      <article class="p-feature skeleton" id="politics-feature"></article>
      <aside class="sidebar">
        <div class="head">‚òÖ TIN N·ªîI B·∫¨T</div>
        <ul id="politics-hot" class="hot"></ul>
      </aside>
    </div>
  </section>

  <!-- 2.5) TRA C·ª®U VƒÇN B·∫¢N CH√çNH S√ÅCH -->
  <section class="section" id="doc-search">
    <h2>üîé TRA C·ª®U VƒÇN B·∫¢N CH√çNH S√ÅCH</h2>
    <form id="doc-search-form" class="section-search" onsubmit="return doDocSearch(event)">
      <input id="doc-q" type="search"
             placeholder="Nh·∫≠p s·ªë / t√™n vƒÉn b·∫£n (vd: 24/2024/Nƒê-CP, ph·ª• c·∫•p khu v·ª±c, nh√† ·ªü, ti·ªÅn l∆∞∆°ng...)"/>
      <select id="doc-type">
        <option value="all">T·∫•t c·∫£ lo·∫°i vƒÉn b·∫£n</option>
        <option value="NGHI_DINH">Ngh·ªã ƒë·ªãnh</option>
        <option value="THONG_TU">Th√¥ng t∆∞</option>
        <option value="QUYET_DINH">Quy·∫øt ƒë·ªãnh</option>
        <option value="CONG_VAN">C√¥ng vƒÉn</option>
      </select>
      <select id="doc-range">
        <option value="all">T·∫•t c·∫£ th·ªùi gian</option>
        <option value="month">30 ng√†y qua</option>
        <option value="year">12 th√°ng qua</option>
      </select>
      <button type="submit">T√¨m ki·∫øm</button>
    </form>
    <div id="doc-results" class="policy-list"></div>
  </section>

  <!-- 3) CH√çNH S√ÅCH M·ªöI -->
  <section class="section" id="policy">
    <h2>‚öñÔ∏è CH√çNH S√ÅCH M·ªöI <span class="badge">Chinhphu.vn</span></h2>
    <div class="policy-grid">
      <div class="p-img card">
        <div class="p-hero">
          <img id="policy-img" class="skeleton" alt="">
          <a id="policy-img-link" class="block-link" href="#" target="_blank" rel="noopener"></a>
        </div>
      </div>
      <div class="p-detail card">
        <a id="policy-detail-link" class="block-link" href="#" target="_blank" rel="noopener"></a>
        <h3 id="policy-title" class="p-title clamp-2"></h3>
        <div id="policy-desc" class="p-desc clamp-3 justify"></div>
        <div id="policy-meta" class="p-meta"></div>
      </div>
      <aside class="p-hot">
        <div class="card hot-card">
          <div class="hot-head">ƒê·ªåC NHI·ªÄU</div>
          <div id="policy-hot" class="hot-list"></div>
        </div>
      </aside>
      <div id="policy-mid" class="p-mid"></div>
    </div>

    <div id="policy-list" class="policy-list"></div>
    <div class="actions">
      <button id="btn-more" class="btn">Xem th√™m</button>
    </div>
  </section>
</div>

<button id="toTop" title="L√™n tr√™n" aria-label="L√™n tr√™n">‚Üë</button>

<footer class="footer">
  <div class="wrap">
    <strong>PTKV3 ‚Ä¢ Trung t√¢m Gi√°o d·ª•c Ch√≠nh tr·ªã s·ªë ¬© 2025</strong>
  </div>
</footer>

<script src="js/navbar.js" defer></script>
<script>
/* ====== CONFIG & UTIL ====== */
const API_BASE = 'https://script.google.com/macros/s/AKfycbxtaSyUTCzMkkKFsuZm9PANCmYGOmFF9shDdFbo2VuZ1rreimkzdPSmv_8sfLw2aHMbfA/exec';
const FALLBACK = 'https://images.unsplash.com/photo-1529070538774-1843cb3265df?q=80&w=1200&auto=format&fit=crop';

function jsonp(url){
  return new Promise((resolve,reject)=>{
    const cb='cb'+Math.random().toString(36).slice(2);
    const s=document.createElement('script');
    s.src=url+(url.includes('?')?'&':'?')+'callback='+cb;
    s.async=true;
    window[cb]=d=>{resolve(d);cleanup()};
    s.onerror=()=>{reject(new Error('JSONP error'));cleanup()};
    function cleanup(){delete window[cb];s.remove()}
    document.body.appendChild(s);
  });
}
const trim=(t,n)=>!t?'':(t.length<=n?t:t.slice(0,n).replace(/\s+\S*$/,'')+'‚Ä¶');
const isMobile=()=>window.innerWidth<=768;

/* ===== TEXT + DEDUPE UTIL ===== */

function cleanText(t){
  if(!t) return '';
  const div=document.createElement('div');
  div.innerHTML=String(t);
  return div.textContent.replace(/\s+/g,' ').trim();
}

function normalizeTitle(t){
  return cleanText(t).toLowerCase();
}

/* stop-word ƒë·ªÉ b·ªè b·ªõt t·ª´ v√¥ nghƒ©a, t·ª´ chung chung */
const STOPWORDS = [
  'v√†','v·ªõi','c·ªßa','cho','t·∫°i','·ªü','nh·ªØng','c√°c','v·ªÅ','trong','khi','ƒë∆∞·ª£c','l√†','ƒë√£','s·∫Ω',
  'n√†y','kia','·∫•y','c√≥','b·ªã','m·ªõi','n√≥ng','c·∫≠p','nh·∫≠t','quy','ƒë·ªãnh','ngh·ªã','ƒë·ªãnh',
  'th√¥ng','t∆∞','quy·∫øt','ƒë·ªãnh','h∆∞·ªõng','d·∫´n','vƒÉn','b·∫£n','n·ªôi','dung','m·ªôt','m·ªôt','s·ªë',
  'ng√†y','th√°ng','nƒÉm','2023','2024','2025','nd-cp','nƒë-cp','tt-byt'
];

const STOP_SET = new Set(STOPWORDS);

/* t√°ch t·ª´ kh√≥a quan tr·ªçng t·ª´ ti√™u ƒë·ªÅ */
function tokenizeTitle(t){
  let s = normalizeTitle(t);
  s = s.replace(/[^\p{L}\p{N}\s]+/gu,' ');
  let words = s.split(/\s+/).filter(Boolean);
  // b·ªè stop-word + t·ª´ qu√° ng·∫Øn
  words = words.filter(w => w.length >= 3 && !STOP_SET.has(w));
  if(!words.length){
    // fallback: gi·ªØ nguy√™n nh∆∞ng v·∫´n l·ªçc t·ª´ ng·∫Øn
    words = s.split(/\s+/).filter(w => w.length >= 3);
  }
  return words.slice(0,8); // gi·ªõi h·∫°n 8 t·ª´/ti√™u ƒë·ªÅ
}

/* t√≠nh ƒë·ªô gi·ªëng nhau gi·ªØa 2 b·ªô t·ª´ kh√≥a */
function tokenSimilarity(aTokens,bTokens){
  if(!aTokens.length || !bTokens.length) return 0;
  const setA = new Set(aTokens);
  const setB = new Set(bTokens);
  let inter = 0;
  for(const w of setA){
    if(setB.has(w)) inter++;
  }
  if(!inter) return 0;
  const minLen = Math.min(setA.size,setB.size);
  return inter / minLen;
}

/* DEDUPE TH√îNG MINH: link + ti√™u ƒë·ªÅ + t·ª´ kh√≥a */
function dedupeSmart(items, threshold = 0.6){
  const seenLinks = new Set();
  const seenTitles = new Set();
  const out = [];

  (items||[]).forEach(it=>{
    const title = it.title || '';
    const rawLink = it.link || '';

    const linkKey = rawLink ? rawLink.split('#')[0].split('?')[0].toLowerCase() : '';
    const titleKey = normalizeTitle(title);

    // 1) tr√πng link ho·∫∑c tr√πng ti√™u ƒë·ªÅ 100%
    if(linkKey && seenLinks.has(linkKey)) return;
    if(titleKey && seenTitles.has(titleKey)) return;

    const tokens = tokenizeTitle(title);
    let isDup = false;

    // 2) so s√°nh v·ªõi nh·ªØng tin ƒë√£ gi·ªØ b·∫±ng t·ª´ kh√≥a
    if(tokens.length){
      for(const kept of out){
        const sim = tokenSimilarity(tokens, kept._tokens || []);
        if(sim >= threshold){
          isDup = true;
          break;
        }
      }
    }
    if(isDup) return;

    if(linkKey) seenLinks.add(linkKey);
    if(titleKey) seenTitles.add(titleKey);
    it._tokens = tokens;
    out.push(it);
  });

  out.forEach(it=>{ delete it._tokens; });
  return out;
}

/* Parse ts => Date */
function parseItemDate(it){
  const raw=it.ts||it.date;
  if(!raw) return null;
  const d=new Date(raw);
  return isNaN(d.getTime())?null:d;
}

function getRangeBounds(range){
  const now=new Date();
  let start=null,end=null;
  if(range==='today'){
    start=new Date(now);start.setHours(0,0,0,0);
    end=new Date(start);end.setDate(end.getDate()+1);
  }else if(range==='7d'){
    end=now;
    start=new Date(now);start.setDate(start.getDate()-7);
  }else if(range==='month'){
    end=now;
    start=new Date(now);start.setDate(start.getDate()-30);
  }else if(range==='prevmonth'){
    end=new Date(now.getFullYear(),now.getMonth(),1);
    start=new Date(end.getFullYear(),end.getMonth()-1,1);
  }else if(range==='year'){
    end=now;
    start=new Date(now);start.setFullYear(start.getFullYear()-1);
  }
  return {start,end};
}

/* ===== TODAY ===== */
let todayItems=[], todayIdx=0, todayShownMobile=5;

function renderTodayTop(it){
  const top=document.getElementById('today-top');
  if(!top||!it) return;
  const imgBox=top.querySelector('.img');
  const txtBox=top.querySelector('.txt');
  const title=cleanText(it.title||'');
  const summary=cleanText(it.summary||'');

  imgBox.classList.remove('skeleton');
  imgBox.innerHTML=
    `<a href="${it.link}" target="_blank" rel="noopener">
       <img src="${it.image||FALLBACK}" onerror="this.src='${FALLBACK}'" alt="">
     </a>`;
  txtBox.classList.remove('skeleton');
  txtBox.innerHTML=
    `<h3 class="title"><a href="${it.link}" target="_blank" rel="noopener">${title}</a></h3>
     ${summary?`<div class="desc">${trim(summary,220)}</div>`:''}
     <div class="muted">${new Date(it.ts||Date.now()).toLocaleString('vi-VN')} ‚Ä¢ VnExpress</div>`;
}

function todayStripHTML(arr,limit){
  const maxAvail=Math.max(0,arr.length-1);
  const safeLimit=Math.min(limit,maxAvail);
  return arr.slice(1,1+safeLimit).map(it=>{
    const title=cleanText(it.title||'');
    const summary=cleanText(it.summary||'');
    return `
      <article class="card-sm">
        <a href="${it.link}" target="_blank" rel="noopener">
          <img src="${it.image||FALLBACK}" onerror="this.src='${FALLBACK}'" alt="">
        </a>
        <div class="pad">
          <h4><a href="${it.link}" target="_blank" rel="noopener">${title}</a></h4>
          ${summary ? `<p class="card-desc">${trim(summary,120)}</p>` : ''}
        </div>
      </article>`;
  }).join('');
}

function renderTodayStrip(){
  if(!todayItems.length) return;
  const strip=document.getElementById('today-strip');
  const btnMore=document.getElementById('today-more');
  if(!strip) return;

  const maxAvail=Math.max(0,todayItems.length-1);
  let limit;
  if(isMobile()){
    if(!todayShownMobile) todayShownMobile=5;
    limit=Math.min(todayShownMobile,maxAvail);
  }else{
    limit=Math.min(18,maxAvail);
  }

  strip.innerHTML=todayStripHTML(todayItems,limit);

  if(btnMore){
    if(isMobile() && limit<maxAvail){
      btnMore.style.display='inline-flex';
    }else{
      btnMore.style.display='none';
    }
  }
}

async function loadToday(){
  const data=await jsonp(API_BASE+'?action=listNews&source=vnexpress');
  const raw = (data.items||[]).filter(x=>x.title&&x.link); // b·ªè r√°c
  todayItems = dedupeSmart(raw)         // l·ªçc tr√πng m·∫°nh
    .filter(x=>x.image);                // ƒë·∫£m b·∫£o c√≥ ·∫£nh

  if(!todayItems.length) return;
  todayShownMobile=5;
  renderTodayTop(todayItems[0]);
  renderTodayStrip();
}

setInterval(()=>{
  if(!todayItems.length) return;
  todayIdx=(todayIdx+1)%todayItems.length;
  renderTodayTop(todayItems[todayIdx]);
},6000);

window.addEventListener('resize',()=>{
  if(todayItems.length) renderTodayStrip();
});

const todayMoreBtn=document.getElementById('today-more');
if(todayMoreBtn){
  todayMoreBtn.addEventListener('click',()=>{
    const maxAvail=Math.max(0,todayItems.length-1);
    todayShownMobile=Math.min(todayShownMobile+5,maxAvail);
    renderTodayStrip();
  });
}

/* ===== POLITICS ===== */
let polItems=[], polIdx=0;

function politicsFeatureHTML(it){
  const title=cleanText(it.title||'');
  const summary=cleanText(it.summary||'');
  return `
    <a href="${it.link}" target="_blank" rel="noopener">
      <img class="hero" src="${it.image||FALLBACK}" onerror="this.src='${FALLBACK}'" alt="">
    </a>
    <div class="pad">
      <h3 class="title"><a href="${it.link}" target="_blank" rel="noopener">${title}</a></h3>
      ${summary?`<div class="desc">${trim(summary,260)}</div>`:''}
      <div class="muted" style="margin-top:6px">${new Date(it.ts||Date.now()).toLocaleString('vi-VN')}</div>
    </div>`;
}
function hotItem(it){
  const title=cleanText(it.title||'');
  return `<li><a href="${it.link}" target="_blank" rel="noopener">${title}</a></li>`;
}

async function loadPolitics(){
  const [a,b]=await Promise.all([
    jsonp(API_BASE+'?action=listNews&source=dangcongsan.hoatdong'),
    jsonp(API_BASE+'?action=listNews&source=dangcongsan.xaydung')
  ]);
  polItems=dedupeSmart([...(a.items||[]),...(b.items||[])])
    .filter(x=>x.title&&x.link)
    .sort((x,y)=>new Date(y.ts)-new Date(x.ts));

  const f=document.getElementById('politics-feature');
  const h=document.getElementById('politics-hot');
  f.classList.remove('skeleton');
  if(!polItems.length){
    f.innerHTML='<div class="pad">Ch∆∞a c√≥ d·ªØ li·ªáu.</div>';
    h.innerHTML='';
    return;
  }
  f.innerHTML=politicsFeatureHTML(polItems[0]);
  const hotList=polItems.slice(1,21);
  h.innerHTML=hotList.map(hotItem).join('');
}

setInterval(()=>{
  if(!polItems.length) return;
  polIdx=(polIdx+1)%polItems.length;
  document.getElementById('politics-feature').innerHTML=
    politicsFeatureHTML(polItems[polIdx]);
},6000);

/* ===== POLICY ===== */
let policyItems=[], policyIdx=0, policyRenderedCount=0;

function renderPolicyTop(it,hotItems){
  const img=document.getElementById('policy-img');
  const imgl=document.getElementById('policy-img-link');
  const ttl=document.getElementById('policy-title');
  const desc=document.getElementById('policy-desc');
  const meta=document.getElementById('policy-meta');
  const hot=document.getElementById('policy-hot');

  if(!it) return;

  const title=cleanText(it.title||'');
  const summary=cleanText(it.summary||'');

  imgl.href=it.link;
  img.classList.remove('skeleton');
  img.src=it.image||FALLBACK;
  img.onerror=()=>img.src=FALLBACK;

  ttl.innerHTML=`<a href="${it.link}" target="_blank" rel="noopener">${title}</a>`;
  desc.textContent = summary;
  meta.textContent=new Date(it.ts||Date.now()).toLocaleString('vi-VN');

  hot.innerHTML=(hotItems||[]).map((x,i)=>{
    const ht=cleanText(x.title||'');
    return `
      <div class="hot-item">
        <span class="hot-num">${i+1}</span>
        <a class="hot-title" href="${x.link}" target="_blank" rel="noopener">${ht}</a>
      </div>`;
  }).join('');
}

function renderPolicyMid(arr){
  const pick=arr.slice(1,4);
  document.getElementById('policy-mid').innerHTML=pick.map(it=>{
    const title=cleanText(it.title||'');
    return `
    <article class="tile card">
      <a href="${it.link}" target="_blank" rel="noopener">
        <img src="${it.image||FALLBACK}" onerror="this.src='${FALLBACK}'" alt="">
      </a>
      <div class="pad">
        <h4 class="clamp-2"><a href="${it.link}" target="_blank" rel="noopener">${title}</a></h4>
      </div>
    </article>`;
  }).join('');
}

function renderPolicyList(initial){
  const list=document.getElementById('policy-list');
  if(!policyItems.length) return;

  const PAGE_FIRST=10;
  const PAGE_NEXT=5;
  const step=initial?PAGE_FIRST:PAGE_NEXT;

  const start=4+policyRenderedCount;
  let end=start+step;
  if(start>=policyItems.length){
    document.getElementById('btn-more').classList.add('hide');
    return;
  }
  if(end>policyItems.length) end=policyItems.length;

  const slice=policyItems.slice(start,end);
  policyRenderedCount += slice.length;

  list.insertAdjacentHTML('beforeend', slice.map(it=>{
    const title=cleanText(it.title||'');
    const summary=cleanText(it.summary||'');
    return `
      <article class="pl-item card">
        <a href="${it.link}" target="_blank" rel="noopener">
          <img src="${it.image||FALLBACK}" onerror="this.src='${FALLBACK}'" alt="">
        </a>
        <div>
          <h4 class="clamp-2"><a href="${it.link}" target="_blank" rel="noopener">${title}</a></h4>
          ${summary?`<div class="desc clamp-3">${summary}</div>`:''}
        </div>
      </article>`;
  }).join(''));

  if(4+policyRenderedCount>=policyItems.length){
    document.getElementById('btn-more').classList.add('hide');
  }
}

async function loadPolicy(){
  const data=await jsonp(API_BASE+'?action=listNews&source=chinhphu');
  policyItems=dedupeSmart(data.items||[]).filter(x=>x.title&&x.link);
  if(!policyItems.length) return;

  renderPolicyTop(policyItems[0],policyItems.slice(1,6));
  renderPolicyMid(policyItems);
  policyRenderedCount=0;
  renderPolicyList(true);
}

setInterval(()=>{
  if(!policyItems.length) return;
  policyIdx=(policyIdx+1)%Math.min(6,policyItems.length);
  renderPolicyTop(policyItems[policyIdx],policyItems.slice(1,6));
},6000);

document.getElementById('btn-more').addEventListener('click',()=>renderPolicyList(false));

/* ===== TIN THEO TH·ªúI GIAN ===== */
async function loadTimeNews(range){
  const info=document.getElementById('time-info');
  const box=document.getElementById('time-results');
  if(!range){
    info.textContent='Anh ch·ªçn kho·∫£ng th·ªùi gian r·ªìi b·∫•m ‚ÄúXem tin‚Äù.';
    box.innerHTML='';
    return;
  }
  info.textContent='ƒêang t·∫£i d·ªØ li·ªáu, vui l√≤ng ch·ªù‚Ä¶';
  box.innerHTML='';

  const {start,end}=getRangeBounds(range);
  const sinceIso=start?start.toISOString():'';
  const url=sinceIso
    ? `${API_BASE}?action=listNewsSince&since=${encodeURIComponent(sinceIso)}`
    : `${API_BASE}?action=listNews`;

  try{
    const data=await jsonp(url);
    const raw=(data.items||[]).filter(x=>x.title&&x.link);

    // kh·ª≠ tr√πng t·ªïng th·ªÉ theo link + ti√™u ƒë·ªÅ + t·ª´ kh√≥a
    let items=dedupeSmart(raw);

    items=items.filter(it=>{
      const d=parseItemDate(it);
      if(!d) return false;
      if(start && d<start) return false;
      if(end && d>=end) return false;
      return true;
    });

    items.sort((a,b)=>{
      const da=parseItemDate(a)||new Date(0);
      const db=parseItemDate(b)||new Date(0);
      return db-da;
    });

    if(!items.length){
      info.textContent='Ch∆∞a c√≥ b·∫£n tin n√†o trong kho·∫£ng th·ªùi gian ƒë√£ ch·ªçn.';
      box.innerHTML='';
      return;
    }

    items=items.slice(0,40);

    box.innerHTML = items.map(it=>{
      const title=cleanText(it.title||'');
      const summary=cleanText(it.summary||'');
      const meta=`${new Date(it.ts||Date.now()).toLocaleString('vi-VN')}${it.source?` ‚Ä¢ ${it.source}`:''}`;
      return `
        <article class="time-card">
          <a href="${it.link}" target="_blank" rel="noopener">
            <img src="${it.image||FALLBACK}" onerror="this.src='${FALLBACK}'" alt="">
          </a>
          <div>
            <h3><a href="${it.link}" target="_blank" rel="noopener">${title}</a></h3>
            ${summary?`<p>${trim(summary,200)}</p>`:''}
            <div class="meta">${meta}</div>
          </div>
        </article>`;
    }).join('');

    info.textContent=`ƒêang hi·ªÉn th·ªã ${items.length} b·∫£n tin trong kho·∫£ng ƒë√£ ch·ªçn (ƒë√£ l·ªçc tr√πng theo t·ª´ kh√≥a).`;
  }catch(e){
    console.error(e);
    info.textContent='C√≥ l·ªói khi t·∫£i d·ªØ li·ªáu. Anh th·ª≠ l·∫°i sau √≠t ph√∫t.';
    box.innerHTML='';
  }
}

document.getElementById('time-form').addEventListener('submit',ev=>{
  ev.preventDefault();
  const sel=document.getElementById('time-range');
  const range=(sel && sel.value)?sel.value:'today';
  loadTimeNews(range);
});

/* ===== TRA C·ª®U VƒÇN B·∫¢N ===== */
async function searchDocs(q,type='all',range='all'){
  let from='';
  const now=new Date();
  if(range==='month'){
    const d=new Date(now);d.setMonth(d.getMonth()-1);
    from=d.toISOString().slice(0,10);
  }else if(range==='year'){
    const d=new Date(now);d.setFullYear(d.getFullYear()-1);
    from=d.toISOString().slice(0,10);
  }
  const params=new URLSearchParams({
    action:'searchDocs',
    q,
    type,
    range,
    from,
    limit:'50'
  });
  const data=await jsonp(`${API_BASE}?${params.toString()}`);
  return data.items||[];
}

async function doDocSearch(ev){
  ev.preventDefault();
  const q=document.getElementById('doc-q').value.trim();
  const type=document.getElementById('doc-type').value;
  const range=document.getElementById('doc-range').value;
  const box=document.getElementById('doc-results');
  if(!q) return;
  box.innerHTML='<div class="muted">ƒêang t√¨m ki·∫øm, vui l√≤ng ch·ªù‚Ä¶</div>';
  try{
    const items=await searchDocs(q,type,range);
    if(!items.length){
      box.innerHTML='<div class="muted">Kh√¥ng t√¨m th·∫•y vƒÉn b·∫£n ph√π h·ª£p. Anh th·ª≠ ƒë·ªïi t·ª´ kh√≥a, lo·∫°i vƒÉn b·∫£n ho·∫∑c kho·∫£ng th·ªùi gian.</div>';
      return;
    }
    box.innerHTML=items.map(it=>{
      const title=cleanText(it.title||'');
      const summary=cleanText(it.summary||'');
      return `
      <article class="pl-item card">
        <a href="${it.link||'#'}" target="_blank" rel="noopener">
          <img src="${it.image||FALLBACK}" onerror="this.src='${FALLBACK}'" alt="">
        </a>
        <div>
          <h4 class="clamp-2">
            <a href="${it.link||'#'}" target="_blank" rel="noopener">
              ${it.so?`[${it.so}] `:''}${title}
            </a>
          </h4>
          ${summary?`<div class="desc clamp-3">${summary}</div>`:''}
          <div class="muted" style="margin-top:6px;font-size:13px">
            ${it.loai||''} ‚Ä¢ ${it.coquan||''} ‚Ä¢ ${it.date||''}
          </div>
          ${it.pdf?`<div style="margin-top:4px"><a href="${it.pdf}" target="_blank" rel="noopener">üìé T·∫£i b·∫£n PDF</a></div>`:''}
        </div>
      </article>`;
    }).join('');
  }catch(e){
    console.error(e);
    box.innerHTML='<div class="muted">C√≥ l·ªói khi t√¨m ki·∫øm. Anh th·ª≠ l·∫°i sau √≠t ph√∫t.</div>';
  }
  return false;
}

/* ===== MOBILE DRAWER ===== */
(function(){
  const drawer=document.getElementById('mDrawer');
  const backdrop=document.querySelector('.m-backdrop');
  const openBtn=document.querySelector('.m-toggle');
  const closeBtn=drawer?.querySelector('.m-close');
  const focusables='a,button,[tabindex]:not([tabindex="-1"])';
  let lastFocus=null;

  document.querySelectorAll('.m-sub').forEach(p=>p.hidden=true);
  document.querySelectorAll('.m-drop').forEach(b=>b.setAttribute('aria-expanded','false'));

  function open(){
    lastFocus=document.activeElement;
    document.body.classList.add('menu-open','no-scroll');
    if(drawer) drawer.setAttribute('aria-hidden','false');
    if(backdrop) backdrop.hidden=false;
    drawer?.querySelector(focusables)?.focus?.();
  }
  function close(){
    document.body.classList.remove('menu-open','no-scroll');
    if(drawer) drawer.setAttribute('aria-hidden','true');
    if(backdrop) backdrop.hidden=true;
    lastFocus?.focus?.();
  }

  openBtn?.addEventListener('click',open);
  closeBtn?.addEventListener('click',close);
  backdrop?.addEventListener('click',close);
  document.addEventListener('keydown',e=>{if(e.key==='Escape') close();});

  drawer?.addEventListener('click',e=>{
    const btn=e.target.closest('.m-drop');
    if(!btn) return;
    const id=btn.getAttribute('aria-controls')||btn.dataset.target?.replace('#','');
    const panel=id?document.getElementById(id):null;
    if(!panel) return;
    const expanded=btn.getAttribute('aria-expanded')==='true';
    btn.setAttribute('aria-expanded',String(!expanded));
    panel.hidden=expanded?true:false;
  });
  drawer?.addEventListener('click',e=>{
    const a=e.target.closest('a');
    if(a) close();
  });
})();

/* ===== INIT ===== */
document.getElementById('toTop').addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

(async function init(){
  try{
    await Promise.all([loadToday(),loadPolitics(),loadPolicy()]);
  }catch(e){console.error(e);}
  setInterval(loadToday,180000);
  setInterval(loadPolitics,180000);
  setInterval(loadPolicy,240000);
})();
</script>
</script>
</body>
</html>
